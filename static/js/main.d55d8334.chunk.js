(this.webpackJsonpview=this.webpackJsonpview||[]).push([[0],{11:function(e,t,a){},13:function(e,t,a){"use strict";a.r(t);var r=a(1),s=a.n(r),n=a(4),i=a.n(n),c=(a(11),a(2)),l=a(5),o=a(6),h=function(){function e(t){Object(l.a)(this,e),this.size=t;var a=new Array(Math.pow(t,2)).fill(0);a=u(a),a=u(a),this.gameState={board:a,score:0,won:!1,over:!1},this.moveCallback=[],this.winCallback=[],this.loseCallback=[]}return Object(o.a)(e,[{key:"setupNewGame",value:function(){var t=new e(this.size);this.gameState={board:t.gameState.board,score:0,won:!1,over:!1}}},{key:"loadGame",value:function(e){this.gameState=e}},{key:"move",value:function(e){switch(e){case"left":if(!this.gameState.over){var t=d(this.gameState.board,this.size),a=d(this.gameState.board,this.size);if(m(t,this.gameState),!t.flat().every((function(e,t){return e===a.flat()[t]})))t.flat().includes(2048)?(this.gameState.board=t.flat(),S(this.gameState,this.moveCallback,this.winCallback)):O(t,this.gameState,this.size,this.moveCallback,this.loseCallback)}break;case"right":if(!this.gameState.over){var r=d(this.gameState.board,this.size),s=d(this.gameState.board,this.size);if(g(r,this.gameState),!r.flat().every((function(e,t){return e===s.flat()[t]})))r.flat().includes(2048)?(this.gameState.board=r.flat(),S(this.gameState,this.moveCallback,this.winCallback)):O(r,this.gameState,this.size,this.moveCallback,this.loseCallback)}break;case"up":if(!this.gameState.over){var n=f(this.gameState.board,this.size),i=f(this.gameState.board,this.size);if(m(n,this.gameState),!n.flat().every((function(e,t){return e===i.flat()[t]})))if(n.flat().includes(2048))this.gameState.board=x(n,this.size).flat(),S(this.gameState,this.moveCallback,this.winCallback);else O(x(n,this.size),this.gameState,this.size,this.moveCallback,this.loseCallback)}break;case"down":if(!this.gameState.over){var c=f(this.gameState.board,this.size),l=f(this.gameState.board,this.size);if(g(c,this.gameState),!c.flat().every((function(e,t){return e===l.flat()[t]})))if(c.flat().includes(2048))this.gameState.board=x(c,this.size).flat(),S(this.gameState,this.moveCallback,this.winCallback);else O(x(c,this.size),this.gameState,this.size,this.moveCallback,this.loseCallback)}}}},{key:"onMove",value:function(e){this.moveCallback.push(e)}},{key:"onLose",value:function(e){this.loseCallback.push(e)}},{key:"onWin",value:function(e){this.winCallback.push(e)}},{key:"getGameState",value:function(){return this.gameState}},{key:"toString",value:function(){for(var e="",t=0;t<this.gameState.board.length;t++)t%this.size===0&&(e+="\n"),0===this.gameState.board[t]?e+=" [   ] ":e+=" [ ".concat(this.gameState.board[t]," ] ");return"".concat(e," \nscore: ").concat(this.gameState.score," \nwon: ").concat(this.gameState.won," \nover: ").concat(this.gameState.over,"\n")}}]),e}(),b=new Array(10).fill(2);function u(e){var t=b[Math.floor(Math.random()*b.length)],a=e.reduce((function(e,t,a){return 0===t&&e.push(a),e}),[]);0!==a.length&&(e[a[Math.floor(Math.random()*a.length)]]=t);return e}function d(e,t){for(var a=[],r=0;r<e.length;r+=t)a.push(e.slice(r,r+t));return a}function f(e,t){for(var a=[],r=0;r<t;r++){for(var s=[],n=0;n<e.length;n+=t)s.push(e[n+r]);a.push(s)}return a}function m(e,t){for(var a=0;a<e.length;a++){for(var r=e[a].filter((function(e){return e})),s=0;s<r.length-1;s++)r[s]===r[s+1]&&(r[s]+=r[s+1],t.score+=r[s],r[s+1]=0,s++);var n=r.filter((function(e){return e})),i=e[a].length-n.length;e[a]=j(n,i)}}function j(e,t){var a=new Array(t).fill(0);return e.concat(a)}function g(e,t){for(var a=0;a<e.length;a++){for(var r=e[a].filter((function(e){return e})),s=r.length-1;s>=0;s--)r[s]===r[s-1]&&(r[s]+=r[s-1],t.score+=r[s],r[s-1]=0,s--);var n=r.filter((function(e){return e})),i=e[a].length-n.length;e[a]=v(n,i)}}function v(e,t){return new Array(t).fill(0).concat(e)}function x(e,t){for(var a=[],r=0;r<t;r++){for(var s=[],n=0;n<t;n++)s.push(e[n][r]);a.push(s)}return a}function p(e,t){for(var a=d(e,t),r=f(e,t),s=0;s<a.length;s++)for(var n=a[s],i=r[s],c=0;c<a.length-1;c++)if(n[c]===n[c+1]||i[c]===i[c+1])return!0;return!1}function O(e,t,a,r,s){var n=u(e.flat());n.every((function(t,a){return t===e.flat()[a]}))?p(n,a)||0!==n.filter((function(e){return 0===e})).length||w(t,r,s):(t.board=n,p(n,a)||0!==n.filter((function(e){return 0===e})).length?r.forEach((function(e){e(t)})):w(t,r,s))}function S(e,t,a){e.won=!0,u(e.board),t.forEach((function(t){t(e)})),a.forEach((function(t){t(e)}))}function w(e,t,a){e.over=!0,t.forEach((function(t){t(e)})),a.forEach((function(t){t(e)}))}b[0]=4;var k=a(0),y=function(e){var t=e.value;return Object(k.jsx)("div",{className:"rounded-md border-solid border-4 text-4xl font-medium",children:N(t)})};function N(e){switch(e){case 0:return Object(k.jsx)("div",{className:"tile-space px-6 py-9",children:""});case 2:return Object(k.jsx)("div",{className:"tile-space bg-red-400",children:Object(k.jsx)("span",{children:e})});case 4:return Object(k.jsx)("div",{className:"tile-space bg-red-600",children:Object(k.jsx)("span",{children:e})});case 8:return Object(k.jsx)("div",{className:"tile-space bg-yellow-400",children:Object(k.jsx)("span",{children:e})});case 16:return Object(k.jsx)("div",{className:"tile-space bg-yellow-600",children:Object(k.jsx)("span",{children:e})});case 32:return Object(k.jsx)("div",{className:"tile-space bg-green-500",children:Object(k.jsx)("span",{children:e})});case 64:return Object(k.jsx)("div",{className:"tile-space bg-green-700",children:Object(k.jsx)("span",{children:e})});case 128:return Object(k.jsx)("div",{className:"tile-space bg-indigo-400",children:Object(k.jsx)("span",{children:e})});case 256:return Object(k.jsx)("div",{className:"tile-space bg-indigo-600",children:Object(k.jsx)("span",{children:e})});case 512:return Object(k.jsx)("div",{className:"tile-space bg-blue-800",children:Object(k.jsx)("span",{children:e})});case 1024:return Object(k.jsx)("div",{className:"tile-space text-3xl bg-purple-800",children:Object(k.jsx)("span",{children:e})});case 2048:return Object(k.jsx)("div",{className:"tile-space text-3xl bg-gray-100 text-black",children:Object(k.jsx)("span",{children:e})});default:return Object(k.jsx)("div",{className:"tile-space text-2xl px-6 py-9 bg-gradient-to-r from-green-400 to-blue-500",children:e})}}var C=function(){var e=new h(4),t=Object(r.useState)(e),a=Object(c.a)(t,2),s=a[0],n=a[1],i=Object(r.useState)(e.gameState.board),l=Object(c.a)(i,2),o=l[0],b=l[1],u=Object(r.useState)(e.gameState),d=Object(c.a)(u,2),f=d[0],m=d[1],j=function(){s.setupNewGame(),n(s),m(s.gameState),b(s.gameState.board)};Object(r.useEffect)((function(){g.current.focus()}),[]);var g=Object(r.useRef)();return Object(k.jsx)("div",{ref:g,className:"outer-container bg-primary flex flex-wrap content-center justify-center text-center",tabIndex:"1",onKeyDown:function(e){switch(e.preventDefault(),e.key){case"ArrowUp":s.move("up"),n(s),m(s.gameState),b(f.board);break;case"ArrowLeft":s.move("left"),n(s),m(s.gameState),b(f.board);break;case"ArrowRight":s.move("right"),n(s),m(s.gameState),b(f.board);break;case"ArrowDown":s.move("down"),n(s),m(s.gameState),b(f.board);break;case"r":j()}},children:Object(k.jsxs)("div",{className:"space-y-6",children:[Object(k.jsx)("h1",{className:"text-5xl font-black font-title",children:"2048"}),Object(k.jsxs)("div",{className:"inner-container",children:[Object(k.jsxs)("div",{className:"ml-6 grid-rows-4",children:[Object(k.jsxs)("h1",{className:"text-3xl pb-4 font-bold w-40",children:["Score: ",f.score]}),Object(k.jsx)("h1",{className:"text-3xl pb-4 font-semibold",children:f.over?"Game Over":""}),Object(k.jsx)("h1",{className:"text-3xl pb-4 font-semibold",children:f.won?"You won":""}),Object(k.jsx)("button",{className:"border-solid border-2 p-2 rounded font-medium",onClick:j,children:"RESET"})]}),Object(k.jsx)("div",{className:"grid grid-cols-4 gap-2 rounded-sm",children:o.map((function(e,t){return Object(k.jsx)("div",{children:Object(k.jsx)(y,{value:e})},t)}))})]}),Object(k.jsxs)("div",{className:"",children:[Object(k.jsx)("h1",{className:"text-3xl p-6 pb-2 pt-0",children:"How To Play"}),Object(k.jsxs)("p",{className:"container mx-auto text-center",children:["Use your ",Object(k.jsx)("strong",{children:"arrow keys"})," to move the tiles. Press ",Object(k.jsx)("strong",{children:"r"})," to reset. Tiles with the ",Object(k.jsx)("strong",{children:"same number"})," merge into one when they touch. Add them up to reach ",Object(k.jsx)("strong",{children:"2048"}),"!"]})]}),Object(k.jsxs)("footer",{className:"flex justify-evenly",children:[Object(k.jsxs)("h1",{children:["Created by: ",Object(k.jsx)("span",{className:"font-title text-red-400",children:"Minh Truong"})]}),Object(k.jsx)("a",{className:"underline text-red-400",rel:"noopener noreferrer",target:"_blank",href:"https://github.com/minh100/2048",children:"Github"})]})]})})};i.a.render(Object(k.jsx)(s.a.StrictMode,{children:Object(k.jsx)(C,{})}),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.d55d8334.chunk.js.map